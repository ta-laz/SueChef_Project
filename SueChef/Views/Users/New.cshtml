@model SueChef.ViewModels.SignUpViewModel

<body class="bg-orange-50 text-gray-700">
    <div class="flex flex-col items-center justify-start p-4">
        <!-- Logo -->
        @* <img src="images/light_grey.png" alt="SeaShark Logo" class="h-24 w-auto" /> *@

        <!-- Welcome -->

        <h1 class="text-3xl font-bold text-center">Welcome To SueChef!</h1>
        <!-- Sign-up -->

        <h2 class="text-xl font-semibold text-center mb-6">Sign Up</h2>
        <!-- sign-up form container -->

        <div class="bg-orange-100 border-l-4 border-orange-400 p-4 rounded shadow">
            <form id="signup-form" asp-action="Create" asp-controller="Users" method="post"
                class="flex flex-col space-y-4" novalidate>
                @Html.AntiForgeryToken()

                <div asp-validation-summary="All"
                    class="bg-red-50 border border-red-400 text-red-700 rounded p-3 mb-4 text-sm">
                </div>


                <style>
                    /* Hides the errors until there are errors */
                    .validation-summary-valid {
                        display: none;
                    }

                    .validation-summary-errors {
                        display: block;
                        /* adds the errors */
                    }
                </style>
                <!-- First name block with validation -->

                <div>
                    <label for="username" class="mb-1 block text-sm text-gray-700">Username</label>
                    <input asp-for="UserName" id="username" data-testid="username" class="w-full border border-gray-400 rounded-lg p-2"
                        placeholder="Username" />
                    <span asp-validation-for="UserName" class="text-gray-700 text-sm font-bold"
                        id="username-error"></span>
                </div>

                <!-- DOB with validation (more may need adding for auto filling?) -->

                <div>
                    <label for="dob" class="mb-1 block text-sm text-gray-700">Date of Birth</label>
                    <input asp-for="DOB" id="dob" type="date" data-testid="dob" class="w-full border border-gray-400 rounded-lg p-2" />
                    <span asp-validation-for="DOB" class="text-gray-700 text-sm font-bold" id="dob-error"></span>
                </div>
                <!-- email block with validation -->

                <div>
                    <label for="email" class="mb-1 block text-sm text-gray-700">Email</label>
                    <input asp-for="Email" data-testid="email" id="email"
                        class="w-full border border-gray-400 rounded-lg p-2" placeholder="Email" />
                    <span asp-validation-for="Email" class="text-gray-700 text-sm font-bold" id="email-error"></span>
                </div>
                <!-- password block with validation -->

                <div>
                    <label for="password" class="mb-1 block text-sm text-gray-700">Password</label>
                    <input asp-for="Password" data-testid="password" id="password" type="password"
                        class="w-full border border-gray-400 rounded-lg p-2" placeholder="Password" />
                    <span asp-validation-for="Password" class="text-gray-700 text-sm font-bold"
                        id="password-error"></span>
                </div>

                <div>
                    <label for="confirmpassword" class="mb-1 block text-sm text-gray-700">Confirm Password</label>
                    <input asp-for="ConfirmPassword" data-testid="confirmpassword"id="confirmpassword" type="password"
                        class="w-full border border-gray-400 rounded-lg p-2" placeholder="Confirm Password" />
                    <span asp-validation-for="ConfirmPassword" class="text-gray-700 text-sm font-bold"
                        id="confirmpassword-error"></span>
                </div>
                <!-- Show password toggle -->

                <div class="flex items-center mt-2">
                    <input id="Show-Password" class="h-4 w-4" type="checkbox" onclick="togglePasswordVisibility()">
                    <label for="Show-Password" class="ml-2 text-md text-gray-700">Show Passwords</label>
                </div>
                <!-- Sign-up submit form -->

                <div class="flex justify-center">
                    <button id="submit" type="submit" data-testid="submit-signup"
                        class="bg-gray-700 text-white text-sm font-medium w-48 px-4 py-2 rounded-md hover:bg-gray-400">Sign
                        Up</button>
                </div>
                <!-- Errors  -->

                @if (ViewBag.Error != null)
                {
                    <div id="error-message" class="text-gray-700 mt-2">@ViewBag.Error</div>
                }

            </form>

            <div class="text-center mt-4">
                <a class="text-gray-700 hover:underline" href="/signin" id="signin">Already have an account? Sign In
                    here!</a>
            </div>
        </div>
    </div>

</body>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
}
<!-- JS for toggle password  -->

<script>
    function togglePasswordVisibility() {
        var pass = document.getElementById("password");
        var confirm = document.getElementById("confirmpassword");
        if (pass.type === "password") {
            pass.type = "text";
            confirm.type = "text";
        } else {
            pass.type = "password";
            confirm.type = "password";
        }
    }
</script>


<style>
    /* highlight invalid fields */
    input.input-validation-error {
        border-color: #e11d48;
    }

    /* add red asterisk to the label right before the invalid input */
    label+input.input-validation-error,
    label+select.input-validation-error,
    label+textarea.input-validation-error {}

    label:has(+ input.input-validation-error)::after,
    label:has(+ select.input-validation-error)::after,
    label:has(+ textarea.input-validation-error)::after {
        content: " *";
        color: #e11d48;
        font-weight: bold;
    }
</style>